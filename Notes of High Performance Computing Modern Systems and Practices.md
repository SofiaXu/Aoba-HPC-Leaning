# 高性能计算 现代系统与实践阅读笔记
## 第一章 绪论
### 总结
- 超级计算和高性能计算的定义：在超级计算机上进行的应用程序操作被称为超级计算，高性能计算与之同义。
- 组成超级计算机的硬件和软件系统堆栈：超级计算机的系统堆栈是由许多物理和逻辑组件组成的分层层次结构。操作系统负责控制和管理物理资源。操作系统抽象层上的软件，包括与执行用户应用程序和负载相关的资源管理。
- 持续性能和峰值性能：峰值性能是超级计算机能达到的最大性能，持续性能是运行应用时达到的实际性能，持续性能总是低于峰值性能。
- 基准测试程序：用于测试超级计算机的性能，最广为人知的之一是 HPL。
- 性能下降的来源：饥饿、延迟、开销和竞争。
- 随着摩尔定律的失效未来计算机的发展方向将依赖于其他创新，通过代替器件技术、架构甚至范式来实现。

## 第二章 HPC 架构：系统和技术
### 总结
- HPC 架构的关键特性：速度、并行性、效率、功率、可靠性、可编程性。
- 并行架构家族--弗林分类法：SISD、SIMD（整个系统的基础、也是当今异构处理器和超级计算机中更复杂控制结构的一部分）、MIMD（使用最广泛的）、MISD。
- SPMD：单程序多数据流，反应 SIMD 的实际变化。
- HPC 的支持技术：数字逻辑技术（ALU 等）、存储技术（DRAM、磁盘、磁带等）。
- 冯诺依曼顺序处理器是当今世界上所有现代超级计算机的基础。
- 流水线将多个连续性的阶段组件连接在一起，因此数据可以从一个阶段传递到另一个阶段，实现快速吞吐。
- 向量体系结构：利用流水线技术实现高速运算单元、寄存器加载和存储，以及重叠存储器访问。
- SIMD：单次执行相同的指令处理不同的数据，笔者认为是类似算法上所讲的分治策略。
- MPP：海量并行处理架构。包括许多的集成计算机处理器的单个系统。存在多种形式的处理器，通过互联方式以及处理器和存储器之间的关系来区分他们。
- 共享内存多处理器：系统中的所有处理器都可访问多个存储器组成的主存储器。SMP 在时间和带宽方面可以同等的访问所有内存。DSM（分布式共享存储）架构也共享所有的存储器，但是可以优先访问某些存储器而不是其他存储器。SMP 被称为 UMA，而DSM则表现出 NUMA 行为。
- 商品集群：利用商用或消费处理器和存储器组成的超级计算机，性价比较高，单个单元称为 COTS（商品现货），效率相较 MPP 低，但非常适合吞吐量计算，当前集群主要采用千兆以太网或InfiniBand网络。
- 阿达姆定律：S = 1/(1-f+(f/Pn)) 将可实现的交付加速比与并行加速器的增益以及可并行执行的总工作负载的比例相关联。

## 第三章 商品集群
### 总结
- 商品集群是一组集成的计算机系统，由多个组件计算机组成，单个组件计算机可以独立运行，并且可以销售给其他消费群体。所采用的集成网络是单独开发和销售的。
- 商品集群由一组处理节点、一个或多个集成节点的互联网络和辅助存储实现的。
- 节点包含作为一个独立计算机运行的所有组件。
- 由于大规模生产可实现规模经济，因此商品集群受益于相对于成本的高性能
- 并行编程的主要编程模式涉及使用与顺序语言绑定的并行库编程接口
- 常用的编程语言：C、C++、Fortran等语言
- 操作系统提供使用计算机和执行自定义应用程序所需的软件环境和服务。它由系统内核、系统库、附加系统服务，以及各种用户实用程序组成。
- 大型计算机使用资源管理系统来协调对多个执行单元的访问、内存的分配、网络选择和持久存储分配。SLURM 是常用的资源管理系统。
- 在商品集群上调试并行应用程序的简单直接的方法：为每个进程启动一个串行调试器。
- 超级计算机集群提供了几套编译器和调试工具，以支持使用集群的不同社区。各个用户环境最常使用模块系统定制。

## 第四章 基准测试程序
### 总结
- 基准测试程序是一种根据经验测量超级计算机性能的方法，它对工作负载提供了一些标准化类型，其大小或输入数据集可能变化。
- 对比了多个测试程序的原理和方向

## 第五章 资源管理的基础
### 总结
- 资源管理工具是 HPC 软件堆栈的固有部分他执行 3 个主要功能：资源分配、工作负载调度以及对分布式工作负载执行和监视的支持
- 资源分配负责根据需求将物理硬件分配到特定的用户任务。
- 资源管理器将可用的计算资源分配给用户指定的作业
- 资源管理器通常会识别计算节点、处理器核心、互联、永久存储和I/O设备以及加速器的资源类型
- 作业可以交互式或批处理执行。批处理需要在启动之前指定作业执行所需的所有必要参数和输入
- 作业可以是单个的，也可以细分为许多较小的步骤或任务
- 大多数系统使用多个作业队列，每个队列具有特定目的和一组调度约束
- 影响作业调度的常用参数：资源的可用性、优先级、分配的资源、最大作业数、请求的执行时间、已执行时间、作业依赖性、时间发生、操作人员可用性和软件许可证可用性等。
- 作业启动器采用分层机制来减轻贷款需求并利用网络拓扑最小化传输的数据量和总体启动时间
- 资源管理器必须能够终止超出其执行时间或其他资源限制的作业。而不管其当前的状态如何
- 常用的资源管理器包括：
